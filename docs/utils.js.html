<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

const Table = require('cli-table');
const _ = require('lodash/string');

/**
 * Utility module that contains various utility functions
 * that are shared by the interactive interface and the default
 * CLI interface.
 * @module lib/utils
 * @author Dennis Thompson &lt;atomicpages@gmail.com>
 * @version 1.0.0
 */
module.exports = {

    /**
     * Platform-dependent user home directory compatible on Windows and *nix systems that export `$HOME`.
     * @return {boolean} The path to the user's home directory.
     */
    home: function () {
        return process.env[process.platform === 'win32' ? 'USERPROFILE' : 'HOME'];
    },

    /**
     * Prints the list of functions to `STDOUT`.
     * @param source {object} The `JSON` model to read from.
     */
    functions: function (source) {
        console.log(this.listFunctions(source));
    },

    /**
     * Generates an ASCII table from a `JSON` model.
     * @param source {object} The `JSON` model to read from.
     */
    listFunctions: function (source) {
        let table = new Table({
            head: ['Name', 'Description'],
            colWidths: [50, 150]
        });

        for (let key in source) {
            if (typeof source[key] === 'string') {
                table.push([key, source[key]]);
            } else if (typeof source[key] === 'object') {
                table.push([key, source[key].desc]);

                for (let k in source[key].variations) {
                    table.push([k, source[key].variations[k]]);
                }
            }
        }

        return table.toString();
    },

    /**
     * Delegates the generation of random data.
     * @param {string} file The file to write to.
     * @param {string[]} columns An array of functions to run on each column.
     * @param {object} options Options to pass the generator.
     * @param {string[]} [headers] An array of custom column headers.
     * @async
     */
    generate: async function (file, columns, options, headers) { // eslint-disable-line
        await require('./generator')(file, columns, options, headers);
    },

    /**
     * Converts a number like 100K to 100000.
     * @param {string} number The number to convert.
     * @throws Error when number is invalid.
     * @return {number} The converted number.
     */
    convertNumber: function (number) {
        if (/^\d+(\.\d*)?(K|M|B)$/.test(number)) {
            let r = number.toLowerCase().trim();

            if (_.endsWith(r, 'k')) {
                return Math.ceil(parseFloat(r) * 1000);
            } else if (_.endsWith(r, 'm')) {
                return Math.ceil(parseFloat(r) * Math.pow(10, 6));
            }

            return Math.ceil(parseFloat(r) * Math.pow(10, 9));
        }

        if (!/[1-9]\d*$/.test(number)) {
            throw new Error('Invalid number');
        }

        return parseInt(number);
    }

};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-lib_generator.html">lib/generator</a></li><li><a href="module-lib_preferences.html">lib/preferences</a></li><li><a href="module-lib_utils.html">lib/utils</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Jan 07 2018 16:38:49 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
